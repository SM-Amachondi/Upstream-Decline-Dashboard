<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Nigeria Upstream: Field Production & Decline Analytics</title>
  <meta name="description" content="Interactive decline curves, forecasts, and operator insights for Nigerian oil fields." />
  <link rel="icon" href="images/logo.svg" type="image/svg+xml">
  <!-- Libraries -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin=""/>
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin=""></script>
  <script src="https://cdn.plot.ly/plotly-2.30.0.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.4.1/papaparse.min.js"></script>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <!-- Splash -->
  <div id="splash" aria-hidden="true">
    <div class="splash-card">
      <img src="images/logo.svg" alt="Logo" style="height:80px; margin-bottom:8px;" />
      <h1>Upstream Production Insights</h1>
      <p class="small">Interactive decline curves, forecasts, and operator insights for Nigerian oil fields.<br/>Built by <strong>Sophia Insights &amp; Analytics</strong>.</p>
      <div class="splash-actions">
        <button class="primary" id="enterBtn">Enter Dashboard</button>
        <button class="ghost" id="methodsBtn">Methods &amp; Assumptions</button>
      </div>
    </div>
  </div>

  <header class="header">
    <div class="brand">
      <img src="images/Sophia Insights & Analytics Logo.PNG" alt="Sophia Insights & Analytics Logo" />
      <div class="titles">
        <div class="title">Nigeria Upstream: Field Production &amp; Decline Analytics</div>
        <div class="subtitle">Bright &amp; glossy | Interactive | Forecast-ready</div>
      </div>
    </div>
  </header>

  <main class="container">

    <section class="kpis" id="kpiRow">
      <div class="kpi">
        <div class="label">Total Production (Latest)</div>
        <div class="value" id="kpi-total">—</div>
      </div>
      <div class="kpi">
        <div class="label">Fields Tracked</div>
        <div class="value" id="kpi-fields">—</div>
      </div>
      <div class="kpi">
        <div class="label">Avg Decline Rate (Hist.)</div>
        <div class="value" id="kpi-decline">—</div>
      </div>
      <div class="kpi">
        <div class="label">Forecast Horizon</div>
        <div class="value" id="kpi-horizon">—</div>
      </div>
    </section>

    <section class="toolbar">
      <input id="searchBox" type="text" placeholder="Search field..." />
      <select id="fieldSelect"></select>
      <button class="primary" id="toggleForecast">Show Forecast</button>
      <button id="downloadCsv">Download CSV</button>
      <button id="exportPng">Export Chart PNG</button>
      <span class="badge" id="selectedMeta">—</span>
    </section>

    <section class="grid">
      <div class="card">
        <h3>Field Map — Size: Avg Production | Color: Basin</h3>
        <div id="map"></div>
      </div>
      <div class="card">
        <h3>Operator Leaderboard (Latest Month)</h3>
        <table id="leader-table">
          <thead>
            <tr><th>Operator</th><th>Fields</th><th>Production (bpd)</th></tr>
          </thead>
          <tbody id="leader-body"></tbody>
        </table>
      </div>
    </section>

    <section class="card" style="margin-top:16px;">
      <h3>Production Trend &amp; Decline Fit</h3>
      <div id="ts-chart"></div>
    </section>

    <section class="card" style="margin-top:16px;">
      <h3>Methods &amp; Assumptions</h3>
      <div id="methods" class="small">
        <p><strong>Data:</strong> Synthetic but realistic monthly production modeled from field start dates, plateau rates and exponential decline. Files: <code>data/fields.csv</code>, <code>data/monthly_prod.csv</code>, <code>data/metadata.json</code>.</p>
        <p><strong>Decline Fit:</strong> Exponential decline <code>q(t)=q0·e^{-Dt}</code> fitted to historical logs via OLS. Forecast extends 24 months beyond last actual.</p>
        <p><strong>Map:</strong> Leaflet with OpenStreetMap tiles. Marker size ∝ average production (recent 12 months). Color encodes basin.</p>
        <p><strong>Design:</strong> Bright, glossy palette; responsive layout; export buttons provided. Replace data with your actual CSVs to go live.</p>
      </div>
    </section>

    <section class="footer">
      <div>© <span id="year"></span> Sophia Insights &amp; Analytics • Built for GitHub Pages</div>
    </section>

  </main>

  <script src="script.js"></script>
</body>
</html>
